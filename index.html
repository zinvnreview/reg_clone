<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account List</title>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
            margin: 20px auto;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }

        .copy-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            margin-left: 5px;
            cursor: pointer;
        }

        /* Hiệu ứng màu sau khi copy */
        .copied {
            background-color: #ffeb3b !important; /* Màu vàng */
        }

        /* Toast notification styles */
        .toast {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            bottom: 30px;
            font-size: 17px;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .toast.show {
            visibility: visible;
            opacity: 1;
        }
        
    </style>
</head>

<body>
    <h1 style="text-align: center;">Generated Accounts</h1>
    <table>
        <thead>
            <tr>
                <th>STT</th>
                <th>Email</th>
                <th>Username</th>
                <th>Password</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="accountsTableBody"></tbody>
    </table>

    <!-- Toast notification div -->
    <div id="toast" class="toast"></div>

    <script>
        // Fetch the JSON data and display it in the table
        fetch('accounts.json')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('accountsTableBody');
                data.forEach((account, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>  <!-- STT -->
                        <td class="copy-target">${account.email}</td>
                        <td class="copy-target">${account.username}</td>
                        <td class="copy-target">${account.password}</td>
                        <td style="display: flex; gap: 5px;">
                            <button class="copy-button" onclick="copyToClipboard(this, '${account.email}', 'email')"> Email</button>
                            <button class="copy-button" onclick="copyToClipboard(this, '${account.username}', 'username')"> Username</button>
                            <button class="copy-button" onclick="copyToClipboard(this, '${account.password}', 'password')"> Password</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Error fetching the JSON data:', error);
            });

        // Function to copy text to clipboard
        function copyToClipboard(button, text, type) {
            navigator.clipboard.writeText(text).then(() => {
                showToast(`${type.charAt(0).toUpperCase() + type.slice(1)} copied to clipboard!`);

                // Xác định ô td tương ứng và đổi màu
                const td = button.closest('td').previousElementSibling;
                td.classList.add('copied');
            }).catch(err => {
                console.error('Could not copy text: ', err);
            });
        }

        // Function to display a toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show';
            
            setTimeout(() => {
                toast.className = toast.className.replace('show', '');
            }, 3000); // Hide toast after 3 seconds
        }
    </script>
</body>

</html>
